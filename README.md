# Registry with Letsencrypt Certificates

## Certbot

The certbot image is a wrapper of the official [certbot/certbot](https://hub.docker.com/r/certbot/certbot/)
image which can issue certificates from letsencrypt. The wrapper add the 
functionality that certificates are renewed in case they are expired.
 
For more information read the [certbot README](/certbot/README.md).

## Registry

### Configuration

#### Environment variables

- **REGISTRY_HTTP_TLS_CERTIFICATE:** The path to the certificate file (generated by the certbot container) 
- **REGISTRY_HTTP_TLS_KEY:** The path to the private key file (generated by the certbot container)
- **REGISTRY_AUTH:**The registry authentication methods. Possible authentication providers are *silly, token* and *htpasswd* 
- **REGISTRY_AUTH_HTPASSWD_REALM:** The realm in which the registry server authenticates.
- **REGISTRY_AUTH_HTPASSWD_PATH:** The path to the `htpasswd` file to load at startup.
- **FORCE_SSL:** Wheather to use SSL encrytion or not. 

#### Volumes

Mount the following volumes.

    volumes:
      - ./registry:/var/lib/registry
      - ./certs:/certs
      - ./auth:/auth

The *registry* volume stores the data pushed to the registry. The *certs* volume stores your certificates and the *auth* volume contains the htpasswd file for authentication.

## Registry frontend
